###一个使用Rabbitmq实现应用解耦案例demo 
####场景：  
用户下订单买商品，订单处理成功后，去扣减库存，在这个场景里，订单系统是生产者，库存系统是消费者。 库存是必须扣减的，在业务上来说，有库存直接扣减即可，没库存或者低于某个阈值，可以扣减成功，不过要通知其他系统（如通知采购系统尽快 采购，通知用户订单系统我们会尽快调货）。  
####RPC 实现  
通过 RPC 的实现， RPC 会造成耦合。一旦库存系统失败，订单系统也会跟着失败。我们希望库存系统本身的失败，不影响订单系统的继续 执行，在业务流程上，进行订单系统和库存系统的解耦。  
####RabbitMQ 的实现   
对于我们消息模式的实现，为保证库存必须有扣减，我们要考虑几个问题：   
1. 订单系统发给 Mq 服务器的扣减库存的消息必须要被 Mq 服务器接收到，意味着需要使用发送者确认。  
2. Mq 服务器在扣减库存的消息被库存服务正确处理前必须一直保存，那么需要消息进行持久化。   
3. 某个库存服务器出了问题，扣减库存的消息要能够被其他正常的库存服务处理，需要我们自行对消费进行确认，意味着不能使用消费者自动确认， 而应该使用手动确认。 所以生产者订单系统这边需要 ，配置文件中队列和交换器进行持久化，消息发送时的持久化，发送者确认的相关配置和代码。 所以消费者库存系统这边要进行手动确认。